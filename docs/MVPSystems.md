# Project Township: MVP Loop System Documentation

<!--
Added: May 8, 2025
Summary: Initial system-by-system documentation for MVP loop (Time, Town, Character, Quest, Exploration). Generated by doc, 2025-05-08.
-->

## Overview
This document provides a system-by-system breakdown of the MVP gameplay loop, summarizing each system's purpose, key classes, integration points, and current documentation status. It is intended as a living document to be expanded as implementation matures.

---

## 1. Time System
- **Purpose:** Advances game time, triggers daily events, manages day/night cycle, and signals end-of-day for quest resolution.
- **Key Classes:**
  - `Chronos` (Scripts/Time/Chronos.cs): Main time manager, tracks day/time, emits signals.
  - `ChronosTimeHook` (Scripts/Time/Chronos.cs): Used for scheduling future events.
  - `Clock` (Scripts/Time/Clock.cs): UI label for displaying time.
  - `Helios` (Scripts/Time/Helios.cs): Controls lighting/shadow for day-night cycle.
- **Integration Points:**
  - Emits signals to QuestSystem, TownSystem, ExplorationSystem.
  - Receives input from player (e.g., sleep to end day).
- **Documentation Status:**
  - Needs class/method summaries and signal/event flow diagrams.

---

## 2. Town System
- **Purpose:** Manages town simulation, building placement, resource tracking, and citizen/adventurer spawning.
- **Key Classes:**
  - `TownManager` (Scripts/Town/TownManager.cs): Central node for town state, resources, and signals.
  - `BuildGrid`, `BuildMenu`, `BuildSite`, `GhostBuilding`, `Building` (Scripts/Town/): Building placement and management.
  - `TownNPC` (Scripts/Town/TownNPC.cs): NPC logic and quest assignment.
- **Integration Points:**
  - Listens for quest/building signals, updates UI, interacts with CharacterSystem.
  - Receives quest completion signals for resource rewards.
- **Documentation Status:**
  - Needs class/method summaries, resource flow diagrams, and UI integration notes.

---

## 3. Character System
- **Purpose:** Handles player/NPC data, stat generation, class/job assignment, and stat growth.
- **Key Classes:**
  - `CharacterSystem` (Scripts/Characters/CharacterSystem.cs): Manages all characters and lookups.
  - `Character` (Scripts/Characters/CharacterData.cs): Data structure for player/NPC.
  - `ClassData`, `RaceData` (Scripts/Characters/): Templates for classes and races.
- **Integration Points:**
  - Provides adventurer data to TownSystem and QuestSystem.
  - Manages player character and stat growth.
- **Documentation Status:**
  - Needs class/method summaries, stat calculation formulas, and data template documentation.

---

## 4. Quest System
- **Purpose:** Manages quest assignment, progress, completion, and reward distribution.
- **Key Classes:**
  - `QuestManager` (Scripts/Quests/QuestManager.cs): Central quest logic and state.
  - `Quest`, `QuestGoal`, `QuestReward`, `QuestEvent` (Scripts/Quests/): Quest data and logic.
  - `QuestMenu`, `QuestPanelData`, `NPCToAssignQuestData` (Scripts/Quests/): UI and assignment.
- **Integration Points:**
  - Receives signals from TimeSystem, TownSystem, CharacterSystem.
  - Emits quest completion and assignment events.
- **Documentation Status:**
  - Needs class/method summaries, quest flow diagrams, and UI integration notes.

---

## 5. Exploration System
- **Purpose:** Manages world map, zone selection, and triggers quest/adventure events outside of town.
- **Key Classes:**
  - `WorldMapNodeSelect` (Scripts/Exploration/WorldMapNodeSelect.cs): Main world map and zone selection logic.
- **Integration Points:**
  - Works with QuestSystem for quest routing and TimeSystem for encounter timing.
- **Documentation Status:**
  - Needs class/method summaries and flow diagrams.

---

## Next Steps
- Expand each section with class/method summaries, diagrams, and usage examples.
- Add integration diagrams and update as systems evolve.
- Review and update regularly as implementation changes.

<!-- Generated by doc, 2025-05-08 -->
